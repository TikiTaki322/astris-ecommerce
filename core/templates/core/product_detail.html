{% extends 'core/base.html' %}

{% block content %}

<div class="container mt-5">
    <div class="card shadow-sm rounded">
        <div class="card-header" style="background-color: #4CAF50; color: white;">
            <h4 class="mb-0">{{ product.name }}</h4>
        </div>

        <!-- Карусель изображений -->
        <div id="productCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">

                <!-- Картинки-заглушки (можно заменить на реальные image.url) -->
                <div class="carousel-item active">
                    <img src="https://picsum.photos/seed/23/600/400" class="d-block w-100" style="object-fit: cover; max-height: 400px;" alt="...">
                </div>
                <div class="carousel-item">
                    <img src="https://picsum.photos/seed/321/600/400" class="d-block w-100" style="object-fit: cover; max-height: 400px;" alt="...">
                </div>
                <div class="carousel-item">
                    <img src="https://picsum.photos/seed/666/600/400" class="d-block w-100" style="object-fit: cover; max-height: 400px;" alt="...">
                </div>
            </div>

            <!-- Arrows -->
            <button class="carousel-control-prev" type="button" data-bs-target="#productCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#productCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>

        <!-- Description -->
        <div class="card-body">
            <p class="mb-2"><strong>Category:</strong> {{ product.category.name|capfirst|default:"—" }}</p>
            <p class="mb-2"><strong>Price:</strong> {{ product.price }} CHF</p>
            <p class="mb-2"><strong>Description:</strong> {{ product.description|default:"—" }}</p>

            {% if user.is_staff or user.role|lower == 'seller' %}
                <p class="mb-2"><strong>Available:</strong> {{ product.quantity }}</p>

                <a href="{% url 'core:product_update' product.pk %}" class="btn btn-outline-primary me-2 mt-2 align-middle">Update</a>
                <form method="post" action="{% url 'core:product_delete' product.pk %}" class="d-inline-block align-middle mt-2">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-outline-danger" onclick="return confirm('Delete product &quot;{{ product.name }}&quot;?');">
                        Delete
                    </button>
                </form>
            {% else %}
                <form method="post" action="{% url 'core:orderitem_create' product.pk %}" class="m-0">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-outline-dark mt-2">Add to cart</button>
                </form>
            {% endif %}
        </div>
    </div>
</div>

{% endblock %}
